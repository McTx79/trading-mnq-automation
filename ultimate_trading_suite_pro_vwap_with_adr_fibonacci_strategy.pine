//@version=5
strategy("Trading Suite VWAP + ADR + Fibo Strategy", overlay=true)

// ===== VWAP =====
vwap_src = hlc3
vwap = ta.vwma(vwap_src, volume)

// ===== ADR =====
adr_period = input.int(20, title="ADR Period (days)")
adr = ta.sma(high - low, adr_period)
adr_high = close + adr / 2
adr_low = close - adr / 2

// ===== Fibonacci Levels =====
fib_50 = close + adr * 0.5
fib_618 = close + adr * 0.618
fib_50_low = close - adr * 0.5
fib_618_low = close - adr * 0.618

plot(adr_high, color=color.green, title="ADR High")
plot(adr_low, color=color.red, title="ADR Low")
plot(fib_50, color=color.orange, title="ADR Fibo 50%")
plot(fib_618, color=color.yellow, title="ADR Fibo 61.8%")
plot(fib_50_low, color=color.orange, title="ADR Fibo 50% (Low)")
plot(fib_618_low, color=color.yellow, title="ADR Fibo 61.8% (Low)")

// ===== Conditions d'entr√©e =====
long_entry = close < adr_low and close > fib_50_low
short_entry = close > adr_high and close < fib_618

// ===== Gestion des positions =====
if long_entry
    strategy.entry("Long", strategy.long)
if short_entry
    strategy.entry("Short", strategy.short)

// ===== Conditions de sortie =====
strategy.exit("Take Profit Long", from_entry="Long", limit=fib_618)
strategy.exit("Stop Loss Long", from_entry="Long", stop=fib_50_low)
strategy.exit("Take Profit Short", from_entry="Short", limit=fib_50)
strategy.exit("Stop Loss Short", from_entry="Short", stop=fib_618)